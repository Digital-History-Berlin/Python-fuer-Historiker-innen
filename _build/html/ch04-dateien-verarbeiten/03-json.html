
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JSON &#8212; Python Basics Jupyter Testversion</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CSV" href="04-csv.html" />
    <link rel="prev" title="Dateien öffnen, lesen und bearbeiten" href="02-dateien-i-o.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/Logo_DigitalHistoryBerlin.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Python Basics Jupyter Testversion</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   Testversion
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Preface
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../ch00-preface/01-vorwort.html">
   Vorwort
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch00-preface/02-einfuehrung.html">
   Einführung
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Python Basics
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ch01-atomare-datentypen/01-atomare-datentypen.html">
   Atomare Datentypen
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch01-atomare-datentypen/02-hallo-welt.html">
     Hallo Welt!
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch01-atomare-datentypen/03-datentyp-strings.html">
     Strings
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch01-atomare-datentypen/04-datentyp-numerisch.html">
     Numerische Datentypen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch01-atomare-datentypen/05-fehlermeldungen.html">
     Fehlermeldungen
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ch02-programmablaeufe-strukturieren/01-programmablaeufe-strukturieren.html">
   Programmabläufe strukturieren
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch02-programmablaeufe-strukturieren/02-bedingte-anweisungen.html">
     Bedingte Anweisungen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch02-programmablaeufe-strukturieren/03-schleifen.html">
     Schleifen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch02-programmablaeufe-strukturieren/04-funktionen.html">
     Funktionen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch02-programmablaeufe-strukturieren/05-pseudocode.html">
     Pseudocode
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ch03-komplexe-datenstrukturen/01-komplexe-datenstrukturen.html">
   Komplexe Datenstrukturen
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch03-komplexe-datenstrukturen/02-listen.html">
     Listen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch03-komplexe-datenstrukturen/03-tupel.html">
     Tupel
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch03-komplexe-datenstrukturen/04-sets.html">
     Sets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ch03-komplexe-datenstrukturen/05-dictionaries.html">
     Dictionaries
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="01-dateien-verarbeiten.html">
   Dateien verarbeiten
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="02-dateien-i-o.html">
     Dateien öffnen, lesen, bearbeiten
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     JSON
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="04-csv.html">
     CSV
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/ch04-dateien-verarbeiten/03-json.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/ch04-dateien-verarbeiten/03-json.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#jsons-in-python-offnen-und-speichern">
   JSONs in Python öffnen und speichern
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#json-in-den-digitalen-geschichtswissenschaften-iiif">
   JSON in den Digitalen Geschichtswissenschaften: IIIF
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#aufgabe-json-daten-verarbeiten">
     Aufgabe: JSON-Daten verarbeiten
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <!-- Table of contents that is only displayed when printing the page -->
    <div id="jb-print-docs-body" class="onlyprint">
        <h1>JSON</h1>
        <!-- Table of contents -->
        <div id="print-main-content" class="row">
            <div class="col-12 col-md-12 pl-md-5 pr-md-5">
            <div id="jb-print-toc">
                
                <div>
                    <h2> Contents </h2>
                </div>
                <nav aria-label="Page">
                    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#jsons-in-python-offnen-und-speichern">
   JSONs in Python öffnen und speichern
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#json-in-den-digitalen-geschichtswissenschaften-iiif">
   JSON in den Digitalen Geschichtswissenschaften: IIIF
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#aufgabe-json-daten-verarbeiten">
     Aufgabe: JSON-Daten verarbeiten
    </a>
   </li>
  </ul>
 </li>
</ul>

                </nav>
            </div>
            
              <div>
                
  <div class="section" id="json">
<h1><a class="reference external" href="https://de.wikipedia.org/wiki/JavaScript_Object_Notation">JSON</a><a class="headerlink" href="#json" title="Permalink to this headline">¶</a></h1>
<p>Einfache Textdateien, wie wir sie soeben eingelesen und geschrieben haben, sind für zahlreiche Anwendungsfälle schon sehr nützlich. Sie sind aber vergleichsweise unstrukturiert. Sehr oft wollen wir im Rahmen historischer Forschungsarbeiten aber mit eindeutig organsierten und strukturierten Informationen arbeiten (Wir haben bei Briefen zum Beispiel folgende Informationen: Datum, Ort, Verfasser:in, Adressat:in, Brieftext, usw.). In einfachen Textdateien könnten wir nicht so ohne Weiteres auf diese Informationen zugreifen. Für solche Anwedungsszenarien gibt es allerdings eine Reihe von Dateiformaten, von denen wir in diesem Kurs zwei genauer in den Blick nehmen werden.</p>
<p>JSON ist etwa ein verbreites Dateiformat zur textbasierten Speicherung strukturierter Daten. Ursprünglich wurde es im Rahmen der Programmiersprache <a class="reference external" href="https://de.wikipedia.org/wiki/JavaScript"><em>JavaScript</em></a> (JSON ist ein Akronym für “JavaScript Object Notation”) zum Austausch von Daten verwendet. Inzwischen ist das Format zu einem wichtigen Standard zur maschinenbasierten Kommunikation zwischen unterschiedlichen Plattformen geworden. Es ist unabhängig von bestimmten Programmiersprachen. Die Strukturierung von JSON-Dateien unterliegt nur <a class="reference external" href="https://www.json.org/json-en.html">wenigen Regeln</a> (lesen Sie sich die Inhalte der verlinkten Seite ruhig einmal durch).</p>
<p>Betrachten wir einmal den Inhalt der Datei “library.json” in unserem Ordner “4_Beispieldaten” (das ist kein ausführbarer Code!):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;My Library&quot;</span><span class="p">,</span>
    <span class="s2">&quot;books available&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;books&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Der Prozess&quot;</span><span class="p">,</span>
            <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Franz Kafka&quot;</span><span class="p">,</span>
            <span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">1935</span><span class="p">,</span>
            <span class="s2">&quot;editions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="mi">1935</span><span class="p">,</span>
                <span class="mi">1946</span><span class="p">,</span>
                <span class="mi">1963</span><span class="p">,</span>
                <span class="mi">1990</span><span class="p">,</span>
                <span class="mi">2011</span><span class="p">,</span>
                <span class="mi">2012</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Half of a Yellow Sun&quot;</span><span class="p">,</span>
            <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Chimamanda Ngozi Adichie&quot;</span><span class="p">,</span>
            <span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2006</span><span class="p">,</span>
            <span class="s2">&quot;editions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="mi">2006</span><span class="p">,</span>
                <span class="mi">2007</span><span class="p">,</span>
                <span class="mi">2017</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Network Effect&quot;</span><span class="p">,</span>
            <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Martha Wells&quot;</span><span class="p">,</span>
            <span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
            <span class="s2">&quot;editions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="mi">2020</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">~</span>\<span class="n">AppData</span>\<span class="n">Local</span>\<span class="n">Temp</span><span class="o">/</span><span class="n">ipykernel_25428</span><span class="o">/</span><span class="mf">1393960755.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="p">{</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>     <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;My Library&quot;</span><span class="p">,</span>
<span class="ne">----&gt; </span><span class="mi">3</span>     <span class="s2">&quot;books available&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>     <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="s2">&quot;books&quot;</span><span class="p">:</span> <span class="p">[</span>

<span class="ne">NameError</span>: name &#39;true&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Mit dem Wissen aus dem letzten Notebook wird Ihnen wahrscheinlich auffallen, dass der Inhalt der Datei wie eine Kombination aus Dictionaries und Listen aussieht. Tatsächlich sind die zugrundeliegenden Konzepte identisch. Einzig die Benennung ist etwas anders – in JSON-Dateien heißen Dictionaries <em>Objekte</em>, Listen heißen <em>Arrays</em>. Ein weiterer feiner Unterschied ist die Verwendung von <code class="docutils literal notranslate"><span class="pre">null</span></code> für ein leeres Element in JSON. In Python verwenden Sie dagegen <code class="docutils literal notranslate"><span class="pre">None</span></code> wenn eine Variable keinen Wert haben soll. Strings und Integers funktionieren, wie Sie es aus Python kennen.</p>
<p>Der Inhalt der JSON-Datei “library.json” besteht demnach aus einem Dictionary mit vier Schlüssel-Wert-Paaren (“label”, “books available”, “owner”, “books”). In “books” ist eine Liste bzw. - im JSON-Sprech - ein Array gespeichert, das weitere Dictionaries respektive Objekte enthält. Jedes Dictionary / Objekt modelliert dabei ein einzelnes Buch.</p>
<p>Wenn Sie mit den hier verwendeten Begriffen Probleme haben, gehen Sie am besten nochmal die Abschnitte zu <em>Listen</em> und <em>Dictionaries</em> im letzten Abschnitt durch.</p>
<div class="section" id="jsons-in-python-offnen-und-speichern">
<h2>JSONs in Python öffnen und speichern<a class="headerlink" href="#jsons-in-python-offnen-und-speichern" title="Permalink to this headline">¶</a></h2>
<p>Nun wollen wir ein Programm schreiben, mit dem wir “library.json” auslesen und um weitere Bücher erweitern können. Mit dem Code aus Abschnitt 4.2 können Sie auch JSON-Dateien öffnen und bearbeiten. Allerdings können wir den Inhalt der Datei dann nur als String verarbeiten – die Struktur aus Dictionaries und Listen geht verloren. Natürlich können wir auch ein Programm schreiben, dass an den richtigen Stellen die richtigen Klammern einfügt – dies ist jedoch aufwändiger als den Inhalt der JSON-Datei in ein einzelnes Dictionary zu konvertieren. Hierzu stellt Python die Programmbibliothek <code class="docutils literal notranslate"><span class="pre">json</span></code> zur Verfügung. Um diese in Ihrem Programm verwenden zu können, müssen Sie zuerst folgende Zeile ausführen:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
</pre></div>
</div>
</div>
</div>
<p>Anschließend können wir den Inhalt der Datei mit der Funktion <code class="docutils literal notranslate"><span class="pre">load()</span></code> auslesen und als Dictionary in einer Variable speichern:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;4_Beispieldateien/library.json&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
    <span class="n">library_content</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">library_content</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">library_content</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Ab jetzt können wir die Daten weiterverarbeiten, wie im letzten Abschnitt behandelt: Sie können damit wie mit jedem anderen Dictionary arbeiten. Mit folgendem Code können Sie etwa alle in der Bibliothek gespeicherten Buchtitel, Autor:innen und das Jahr der letzten Auflage auslesen:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">book_list</span> <span class="o">=</span> <span class="n">library_content</span><span class="p">[</span><span class="s1">&#39;books&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">book_list</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Das Buch &#39;</span><span class="si">{}</span><span class="s2">&#39; von &#39;</span><span class="si">{}</span><span class="s2">&#39; wurde zuletzt im Jahr </span><span class="si">{}</span><span class="s2"> aufgelegt.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">book</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">],</span> <span class="n">book</span><span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">],</span> <span class="n">book</span><span class="p">[</span><span class="s1">&#39;editions&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
</div>
</div>
<p>Änderungen an der <em>Datei</em> “library.json” können Sie ähnlich wie in Abschnitt 4.2 vornehmen. Bereiten Sie zuerst die Dictionary-Variable vor, die den Inhalt der JSON-Datei speichert. Anschließend kann die Variable mit der Funktion <code class="docutils literal notranslate"><span class="pre">dump()</span></code> in eine JSON-Datei exportiert werden. Ähnlich wie die Funktion <code class="docutils literal notranslate"><span class="pre">write()</span></code>, die Sie weiter oben kennen gelernt haben, benötigt <code class="docutils literal notranslate"><span class="pre">dump()</span></code>, die Dictionary-Variable und ein Datei-Objekt als Parameter. Hier aktualisieren wir die fehlende Information unter “owner”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">library_content</span><span class="p">[</span><span class="s1">&#39;owner&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Melanie&quot;</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;4_Beispieldateien/library.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">library_content</span><span class="p">,</span> <span class="n">json_file</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Wenn Sie die JSON-Datei nun aus dem Ordner “4_Beispieldateien” heraus öffnen (zum Beispiel mittels Editor) werden Sie feststellen, dass der Inhalt nun in einer einzigen Zeile gespeichert ist. Insbesondere bei sehr großen JSON-Dateien lässt sich so Speicherplatz sparen (Zur Erinnerung: Zeilenumbrüche und Tabstobs werden durch “\n” bzw. “\t” repräsentiert; auch einzelne Zeichen verbrauchen Speicherkapazität). Oft müssen Sie bei der Arbeit mit JSON-Dateien aber auch in die Dateien reinschauen; hier helfen dann Zeilenumbrüche und Einrückungen. Sie können der Funktion <code class="docutils literal notranslate"><span class="pre">dump()</span></code> einen weiteren Parameter (<code class="docutils literal notranslate"><span class="pre">indent</span></code>) mit der Anzahl der Einrückungen nach einem Zeilenumbruch übergeben. Auf diese Weise wird die JSON-Datei lesbarer:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">library_content</span><span class="p">[</span><span class="s1">&#39;owner&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Philipp&quot;</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;4_Beispieldateien/library.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">library_content</span><span class="p">,</span> <span class="n">json_file</span><span class="p">,</span> <span class="n">indent</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Wenn Sie die JSON-Datei nun noch einmal öffnen, dann sollte sie sich schon sehr viel übersichtlicher darstellen.</p>
</div>
<div class="section" id="json-in-den-digitalen-geschichtswissenschaften-iiif">
<h2>JSON in den Digitalen Geschichtswissenschaften: IIIF<a class="headerlink" href="#json-in-den-digitalen-geschichtswissenschaften-iiif" title="Permalink to this headline">¶</a></h2>
<p>Ein zunehmend wichtig werdender Datenstandard im Cultural-Heritage-Bereich ist das <a class="reference external" href="https://iiif.io/"><em>International Image Interoperability Framework (IIIF)</em></a> (Aussprache: Triple-I-F). Es wurde ursprünglich von verschiedenen GLAM-Einrichtung (Galleries, Libraries, Archives, Museums) entwickelt. Ziel war es, ein standardisiertes Framework für ein Datenmodell zu schaffen, um bildbasiertes Kulturgut interoperabel (also unabhängig von den sich unterscheidenden Standards unterschiedlicher Kultureinrichtungen) online präsentieren und austauschen zu können. Dabei sollten nicht nur Metadaten zur Beschreibung des Kontextes der einzelnen Kulturgutobjekte gespeichert werden können, sondern insbesondere bei Werken, die aus mehreren Bilddateien bestehen, logische Zusammenhänge zwischen den Einzelbildern für das Gesamtwerk erhalten werden. Die Anwendungsmöglichkeiten von IIIF sind sehr vielfältig; <a class="reference external" href="https://github.com/IIIF/awesome-iiif">zahlreiche Einrichtungen und Projekte</a> greifen mittlerweile darauf zurück.</p>
<p>Sie müssen sich für diese Einführung nicht intensiv in IIIF einarbeiten. In der folgenden Übungsaufgabe werden wir uns ausschließlich auf die <a class="reference external" href="http://ronallo.com/iiif-workshop/presentation/">Presentation API</a> konzentrieren. In aller Kürze beschrieben definiert die <em>Presentation API</em> einen Standard zur Strukturierung einer JSON-Datei um die Zusammenhänge eines bildbasierten Werkes beschreiben zu können (<a class="reference external" href="https://iiif.io/api/presentation/3.0/">Vollständige Dokumentation der <em>Presentation API</em></a>). Eine solche Datei wird <em>Manifest</em> genannt.</p>
<p>In der folgenden Aufgabe werden wir mit mittelalterlichen Handschriften arbeiten. Eine einzelne Handschrift kann als ein einzelnes, bildbasiertes Werk verstanden werden (beachten Sie dabei, dass es hier um das tatsächliche Buch, das in irgendeiner Bibliothek liegt, geht – nicht um den Text der Handschrift oder um Faksimiles). Eine Handschrift kann somit durch ein IIIF-Manifest repräsentiert werden. Betrachten wir z.B. das Manuskript “Grandes Chroniques de France”; Sie finden es in den Beispieldateien unter “BnF. Departement des Manuscrits. Français 2608.json”. Wir müssen an dieser Stelle nicht auf jedes Detail genau eingehen. Metadaten der Handschrift sind in der Liste “metadata” gespeichert. Hier finden Sie z.B. den Titel, die Datierung oder die Sprache, in der der Text verfasst ist. Das Manifest enthält außerdem die Links zu den Bilddateien der Scans der einzelnen Seiten. Diese sind im Manifest in der Liste “canvases” gespeichert (die ein Dictionary in der Liste “sequences” ist). Jede Seite der Handschrift wird dabei durch ein “canvas”-Dictionary repräsentiert. Um den Link zur Bilddatei der jeweiligen Seite zu finden, suchen Sie in der Liste “images” nach dem Schlüssel “&#64;id”.[1] Der Link zur Bilddatei der ersten Seite der “Grandes Chroniques de France” ist z.B. <a class="reference external" href="https://gallica.bnf.fr/iiif/ark:/12148/btv1b8451604g/f1/full/full/0/native.jpg">https://gallica.bnf.fr/iiif/ark:/12148/btv1b8451604g/f1/full/full/0/native.jpg</a>. Schauen Sie sich die JSON-Datei gut an und vollziehen Sie ihren Aufbau nach.</p>
<p>Angenommen, Sie wollen nun die Scans aller Seiten der Handschrift herunterladen. In diesem Fall können Sie natürlich auch die Handschrift im <a class="reference external" href="https://gallica.bnf.fr/ark:/12148/btv1b8451604g">Viewer der französischen Nationalbibliothek</a> aufrufen und die Digitalisate dort herunterladen. Wollen Sie das jedoch für mehrere Dutzend oder gar Hundert Handschriften tun, bieten Ihnen die IIIF-Manifeste eine Möglichkeit den Download automatisiert durchzuführen.</p>
<p>[1] “images” muss eine Liste sein, da ein IIIF-“canvas” auch aus mehreren Bilddateien bestehen kann. So kann etwa im Manifest abgebildet werden, dass zu einer Seite einer Handschrift nur Fragmente existieren; jedes Fragment kann durch eine eigene Bilddatei dargestellt werden. Das nur als kleines Beispiel für die Flexibilität von IIIF.</p>
<div class="section" id="aufgabe-json-daten-verarbeiten">
<h3>Aufgabe: JSON-Daten verarbeiten<a class="headerlink" href="#aufgabe-json-daten-verarbeiten" title="Permalink to this headline">¶</a></h3>
<p>Schreiben Sie ein Programm zur Vorbereitung eines automatischen Downloads aller Bilddateien der Scans einer Reihe von vorgegebenen mittelalterlichen Handschriften. Die IIIF-Manifeste der einzelnen Handschriften finden Sie in den Beispieldateien dieser Übungseinheit. Ihr Programm sollte die folgenden Aufgaben durchführen:</p>
<ul class="simple">
<li><p>Die Links zu den Bilddateien der Scans sollten in einer Textdatei (.txt) gespeichert werden. Nach jedem Link soll ein Zeilenumbruch erfolgen. Die Links werden also zeilenweise in der Datei aufgelistet.</p></li>
<li><p>Es soll für jede Handschrift jeweils eine eigene Textdatei erstellt werden, die die Links zu ihren Scans enthält.</p></li>
<li><p>Der Name jeder Textdatei soll der Titel der jeweiligen Handschrift sein (also z.B. “Grandes Chroniques de France.txt”).</p></li>
<li><p><em>Optional: Extrahieren Sie nur die Links aus den IIIF-Manifesten, deren Handschriften irgendwann zwischen den Jahren 1300 und 1400 datiert sind.</em></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">folder_path</span> <span class="o">=</span> <span class="s2">&quot;4_Beispieldateien/iiif-manifests/&quot;</span>
<span class="n">manifests</span> <span class="o">=</span> <span class="p">[</span>
      <span class="s2">&quot;BnF. Departement des manuscrits. Francais 2170.json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;BnF. Departement des manuscrits. Francais 2187.json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;BnF. Departement des Manuscrits. Francais 1950.json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;BnF. Departement des manuscrits. Francais 2196.json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;BnF. Departement des Manuscrits. Francais 2228.json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;BnF. Departement des Manuscrits. Francais 2608.json&quot;</span>       
<span class="p">]</span>

<span class="c1"># Ihr Code</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./ch04-dateien-verarbeiten"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </div>
        </div>
    </div>
    <div id="main-content" class="row noprint">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="json">
<h1><a class="reference external" href="https://de.wikipedia.org/wiki/JavaScript_Object_Notation">JSON</a><a class="headerlink" href="#json" title="Permalink to this headline">¶</a></h1>
<p>Einfache Textdateien, wie wir sie soeben eingelesen und geschrieben haben, sind für zahlreiche Anwendungsfälle schon sehr nützlich. Sie sind aber vergleichsweise unstrukturiert. Sehr oft wollen wir im Rahmen historischer Forschungsarbeiten aber mit eindeutig organsierten und strukturierten Informationen arbeiten (Wir haben bei Briefen zum Beispiel folgende Informationen: Datum, Ort, Verfasser:in, Adressat:in, Brieftext, usw.). In einfachen Textdateien könnten wir nicht so ohne Weiteres auf diese Informationen zugreifen. Für solche Anwedungsszenarien gibt es allerdings eine Reihe von Dateiformaten, von denen wir in diesem Kurs zwei genauer in den Blick nehmen werden.</p>
<p>JSON ist etwa ein verbreites Dateiformat zur textbasierten Speicherung strukturierter Daten. Ursprünglich wurde es im Rahmen der Programmiersprache <a class="reference external" href="https://de.wikipedia.org/wiki/JavaScript"><em>JavaScript</em></a> (JSON ist ein Akronym für “JavaScript Object Notation”) zum Austausch von Daten verwendet. Inzwischen ist das Format zu einem wichtigen Standard zur maschinenbasierten Kommunikation zwischen unterschiedlichen Plattformen geworden. Es ist unabhängig von bestimmten Programmiersprachen. Die Strukturierung von JSON-Dateien unterliegt nur <a class="reference external" href="https://www.json.org/json-en.html">wenigen Regeln</a> (lesen Sie sich die Inhalte der verlinkten Seite ruhig einmal durch).</p>
<p>Betrachten wir einmal den Inhalt der Datei “library.json” in unserem Ordner “4_Beispieldaten” (das ist kein ausführbarer Code!):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;My Library&quot;</span><span class="p">,</span>
    <span class="s2">&quot;books available&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;books&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Der Prozess&quot;</span><span class="p">,</span>
            <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Franz Kafka&quot;</span><span class="p">,</span>
            <span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">1935</span><span class="p">,</span>
            <span class="s2">&quot;editions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="mi">1935</span><span class="p">,</span>
                <span class="mi">1946</span><span class="p">,</span>
                <span class="mi">1963</span><span class="p">,</span>
                <span class="mi">1990</span><span class="p">,</span>
                <span class="mi">2011</span><span class="p">,</span>
                <span class="mi">2012</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Half of a Yellow Sun&quot;</span><span class="p">,</span>
            <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Chimamanda Ngozi Adichie&quot;</span><span class="p">,</span>
            <span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2006</span><span class="p">,</span>
            <span class="s2">&quot;editions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="mi">2006</span><span class="p">,</span>
                <span class="mi">2007</span><span class="p">,</span>
                <span class="mi">2017</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Network Effect&quot;</span><span class="p">,</span>
            <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="s2">&quot;Martha Wells&quot;</span><span class="p">,</span>
            <span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2020</span><span class="p">,</span>
            <span class="s2">&quot;editions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="mi">2020</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">~</span>\<span class="n">AppData</span>\<span class="n">Local</span>\<span class="n">Temp</span><span class="o">/</span><span class="n">ipykernel_25428</span><span class="o">/</span><span class="mf">1393960755.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="p">{</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>     <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;My Library&quot;</span><span class="p">,</span>
<span class="ne">----&gt; </span><span class="mi">3</span>     <span class="s2">&quot;books available&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>     <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span>     <span class="s2">&quot;books&quot;</span><span class="p">:</span> <span class="p">[</span>

<span class="ne">NameError</span>: name &#39;true&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Mit dem Wissen aus dem letzten Notebook wird Ihnen wahrscheinlich auffallen, dass der Inhalt der Datei wie eine Kombination aus Dictionaries und Listen aussieht. Tatsächlich sind die zugrundeliegenden Konzepte identisch. Einzig die Benennung ist etwas anders – in JSON-Dateien heißen Dictionaries <em>Objekte</em>, Listen heißen <em>Arrays</em>. Ein weiterer feiner Unterschied ist die Verwendung von <code class="docutils literal notranslate"><span class="pre">null</span></code> für ein leeres Element in JSON. In Python verwenden Sie dagegen <code class="docutils literal notranslate"><span class="pre">None</span></code> wenn eine Variable keinen Wert haben soll. Strings und Integers funktionieren, wie Sie es aus Python kennen.</p>
<p>Der Inhalt der JSON-Datei “library.json” besteht demnach aus einem Dictionary mit vier Schlüssel-Wert-Paaren (“label”, “books available”, “owner”, “books”). In “books” ist eine Liste bzw. - im JSON-Sprech - ein Array gespeichert, das weitere Dictionaries respektive Objekte enthält. Jedes Dictionary / Objekt modelliert dabei ein einzelnes Buch.</p>
<p>Wenn Sie mit den hier verwendeten Begriffen Probleme haben, gehen Sie am besten nochmal die Abschnitte zu <em>Listen</em> und <em>Dictionaries</em> im letzten Abschnitt durch.</p>
<div class="section" id="jsons-in-python-offnen-und-speichern">
<h2>JSONs in Python öffnen und speichern<a class="headerlink" href="#jsons-in-python-offnen-und-speichern" title="Permalink to this headline">¶</a></h2>
<p>Nun wollen wir ein Programm schreiben, mit dem wir “library.json” auslesen und um weitere Bücher erweitern können. Mit dem Code aus Abschnitt 4.2 können Sie auch JSON-Dateien öffnen und bearbeiten. Allerdings können wir den Inhalt der Datei dann nur als String verarbeiten – die Struktur aus Dictionaries und Listen geht verloren. Natürlich können wir auch ein Programm schreiben, dass an den richtigen Stellen die richtigen Klammern einfügt – dies ist jedoch aufwändiger als den Inhalt der JSON-Datei in ein einzelnes Dictionary zu konvertieren. Hierzu stellt Python die Programmbibliothek <code class="docutils literal notranslate"><span class="pre">json</span></code> zur Verfügung. Um diese in Ihrem Programm verwenden zu können, müssen Sie zuerst folgende Zeile ausführen:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
</pre></div>
</div>
</div>
</div>
<p>Anschließend können wir den Inhalt der Datei mit der Funktion <code class="docutils literal notranslate"><span class="pre">load()</span></code> auslesen und als Dictionary in einer Variable speichern:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;4_Beispieldateien/library.json&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
    <span class="n">library_content</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">library_content</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">library_content</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Ab jetzt können wir die Daten weiterverarbeiten, wie im letzten Abschnitt behandelt: Sie können damit wie mit jedem anderen Dictionary arbeiten. Mit folgendem Code können Sie etwa alle in der Bibliothek gespeicherten Buchtitel, Autor:innen und das Jahr der letzten Auflage auslesen:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">book_list</span> <span class="o">=</span> <span class="n">library_content</span><span class="p">[</span><span class="s1">&#39;books&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">book_list</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Das Buch &#39;</span><span class="si">{}</span><span class="s2">&#39; von &#39;</span><span class="si">{}</span><span class="s2">&#39; wurde zuletzt im Jahr </span><span class="si">{}</span><span class="s2"> aufgelegt.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">book</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">],</span> <span class="n">book</span><span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">],</span> <span class="n">book</span><span class="p">[</span><span class="s1">&#39;editions&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
</div>
</div>
<p>Änderungen an der <em>Datei</em> “library.json” können Sie ähnlich wie in Abschnitt 4.2 vornehmen. Bereiten Sie zuerst die Dictionary-Variable vor, die den Inhalt der JSON-Datei speichert. Anschließend kann die Variable mit der Funktion <code class="docutils literal notranslate"><span class="pre">dump()</span></code> in eine JSON-Datei exportiert werden. Ähnlich wie die Funktion <code class="docutils literal notranslate"><span class="pre">write()</span></code>, die Sie weiter oben kennen gelernt haben, benötigt <code class="docutils literal notranslate"><span class="pre">dump()</span></code>, die Dictionary-Variable und ein Datei-Objekt als Parameter. Hier aktualisieren wir die fehlende Information unter “owner”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">library_content</span><span class="p">[</span><span class="s1">&#39;owner&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Melanie&quot;</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;4_Beispieldateien/library.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">library_content</span><span class="p">,</span> <span class="n">json_file</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Wenn Sie die JSON-Datei nun aus dem Ordner “4_Beispieldateien” heraus öffnen (zum Beispiel mittels Editor) werden Sie feststellen, dass der Inhalt nun in einer einzigen Zeile gespeichert ist. Insbesondere bei sehr großen JSON-Dateien lässt sich so Speicherplatz sparen (Zur Erinnerung: Zeilenumbrüche und Tabstobs werden durch “\n” bzw. “\t” repräsentiert; auch einzelne Zeichen verbrauchen Speicherkapazität). Oft müssen Sie bei der Arbeit mit JSON-Dateien aber auch in die Dateien reinschauen; hier helfen dann Zeilenumbrüche und Einrückungen. Sie können der Funktion <code class="docutils literal notranslate"><span class="pre">dump()</span></code> einen weiteren Parameter (<code class="docutils literal notranslate"><span class="pre">indent</span></code>) mit der Anzahl der Einrückungen nach einem Zeilenumbruch übergeben. Auf diese Weise wird die JSON-Datei lesbarer:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">library_content</span><span class="p">[</span><span class="s1">&#39;owner&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Philipp&quot;</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;4_Beispieldateien/library.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">library_content</span><span class="p">,</span> <span class="n">json_file</span><span class="p">,</span> <span class="n">indent</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Wenn Sie die JSON-Datei nun noch einmal öffnen, dann sollte sie sich schon sehr viel übersichtlicher darstellen.</p>
</div>
<div class="section" id="json-in-den-digitalen-geschichtswissenschaften-iiif">
<h2>JSON in den Digitalen Geschichtswissenschaften: IIIF<a class="headerlink" href="#json-in-den-digitalen-geschichtswissenschaften-iiif" title="Permalink to this headline">¶</a></h2>
<p>Ein zunehmend wichtig werdender Datenstandard im Cultural-Heritage-Bereich ist das <a class="reference external" href="https://iiif.io/"><em>International Image Interoperability Framework (IIIF)</em></a> (Aussprache: Triple-I-F). Es wurde ursprünglich von verschiedenen GLAM-Einrichtung (Galleries, Libraries, Archives, Museums) entwickelt. Ziel war es, ein standardisiertes Framework für ein Datenmodell zu schaffen, um bildbasiertes Kulturgut interoperabel (also unabhängig von den sich unterscheidenden Standards unterschiedlicher Kultureinrichtungen) online präsentieren und austauschen zu können. Dabei sollten nicht nur Metadaten zur Beschreibung des Kontextes der einzelnen Kulturgutobjekte gespeichert werden können, sondern insbesondere bei Werken, die aus mehreren Bilddateien bestehen, logische Zusammenhänge zwischen den Einzelbildern für das Gesamtwerk erhalten werden. Die Anwendungsmöglichkeiten von IIIF sind sehr vielfältig; <a class="reference external" href="https://github.com/IIIF/awesome-iiif">zahlreiche Einrichtungen und Projekte</a> greifen mittlerweile darauf zurück.</p>
<p>Sie müssen sich für diese Einführung nicht intensiv in IIIF einarbeiten. In der folgenden Übungsaufgabe werden wir uns ausschließlich auf die <a class="reference external" href="http://ronallo.com/iiif-workshop/presentation/">Presentation API</a> konzentrieren. In aller Kürze beschrieben definiert die <em>Presentation API</em> einen Standard zur Strukturierung einer JSON-Datei um die Zusammenhänge eines bildbasierten Werkes beschreiben zu können (<a class="reference external" href="https://iiif.io/api/presentation/3.0/">Vollständige Dokumentation der <em>Presentation API</em></a>). Eine solche Datei wird <em>Manifest</em> genannt.</p>
<p>In der folgenden Aufgabe werden wir mit mittelalterlichen Handschriften arbeiten. Eine einzelne Handschrift kann als ein einzelnes, bildbasiertes Werk verstanden werden (beachten Sie dabei, dass es hier um das tatsächliche Buch, das in irgendeiner Bibliothek liegt, geht – nicht um den Text der Handschrift oder um Faksimiles). Eine Handschrift kann somit durch ein IIIF-Manifest repräsentiert werden. Betrachten wir z.B. das Manuskript “Grandes Chroniques de France”; Sie finden es in den Beispieldateien unter “BnF. Departement des Manuscrits. Français 2608.json”. Wir müssen an dieser Stelle nicht auf jedes Detail genau eingehen. Metadaten der Handschrift sind in der Liste “metadata” gespeichert. Hier finden Sie z.B. den Titel, die Datierung oder die Sprache, in der der Text verfasst ist. Das Manifest enthält außerdem die Links zu den Bilddateien der Scans der einzelnen Seiten. Diese sind im Manifest in der Liste “canvases” gespeichert (die ein Dictionary in der Liste “sequences” ist). Jede Seite der Handschrift wird dabei durch ein “canvas”-Dictionary repräsentiert. Um den Link zur Bilddatei der jeweiligen Seite zu finden, suchen Sie in der Liste “images” nach dem Schlüssel “&#64;id”.[1] Der Link zur Bilddatei der ersten Seite der “Grandes Chroniques de France” ist z.B. <a class="reference external" href="https://gallica.bnf.fr/iiif/ark:/12148/btv1b8451604g/f1/full/full/0/native.jpg">https://gallica.bnf.fr/iiif/ark:/12148/btv1b8451604g/f1/full/full/0/native.jpg</a>. Schauen Sie sich die JSON-Datei gut an und vollziehen Sie ihren Aufbau nach.</p>
<p>Angenommen, Sie wollen nun die Scans aller Seiten der Handschrift herunterladen. In diesem Fall können Sie natürlich auch die Handschrift im <a class="reference external" href="https://gallica.bnf.fr/ark:/12148/btv1b8451604g">Viewer der französischen Nationalbibliothek</a> aufrufen und die Digitalisate dort herunterladen. Wollen Sie das jedoch für mehrere Dutzend oder gar Hundert Handschriften tun, bieten Ihnen die IIIF-Manifeste eine Möglichkeit den Download automatisiert durchzuführen.</p>
<p>[1] “images” muss eine Liste sein, da ein IIIF-“canvas” auch aus mehreren Bilddateien bestehen kann. So kann etwa im Manifest abgebildet werden, dass zu einer Seite einer Handschrift nur Fragmente existieren; jedes Fragment kann durch eine eigene Bilddatei dargestellt werden. Das nur als kleines Beispiel für die Flexibilität von IIIF.</p>
<div class="section" id="aufgabe-json-daten-verarbeiten">
<h3>Aufgabe: JSON-Daten verarbeiten<a class="headerlink" href="#aufgabe-json-daten-verarbeiten" title="Permalink to this headline">¶</a></h3>
<p>Schreiben Sie ein Programm zur Vorbereitung eines automatischen Downloads aller Bilddateien der Scans einer Reihe von vorgegebenen mittelalterlichen Handschriften. Die IIIF-Manifeste der einzelnen Handschriften finden Sie in den Beispieldateien dieser Übungseinheit. Ihr Programm sollte die folgenden Aufgaben durchführen:</p>
<ul class="simple">
<li><p>Die Links zu den Bilddateien der Scans sollten in einer Textdatei (.txt) gespeichert werden. Nach jedem Link soll ein Zeilenumbruch erfolgen. Die Links werden also zeilenweise in der Datei aufgelistet.</p></li>
<li><p>Es soll für jede Handschrift jeweils eine eigene Textdatei erstellt werden, die die Links zu ihren Scans enthält.</p></li>
<li><p>Der Name jeder Textdatei soll der Titel der jeweiligen Handschrift sein (also z.B. “Grandes Chroniques de France.txt”).</p></li>
<li><p><em>Optional: Extrahieren Sie nur die Links aus den IIIF-Manifesten, deren Handschriften irgendwann zwischen den Jahren 1300 und 1400 datiert sind.</em></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">folder_path</span> <span class="o">=</span> <span class="s2">&quot;4_Beispieldateien/iiif-manifests/&quot;</span>
<span class="n">manifests</span> <span class="o">=</span> <span class="p">[</span>
      <span class="s2">&quot;BnF. Departement des manuscrits. Francais 2170.json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;BnF. Departement des manuscrits. Francais 2187.json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;BnF. Departement des Manuscrits. Francais 1950.json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;BnF. Departement des manuscrits. Francais 2196.json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;BnF. Departement des Manuscrits. Francais 2228.json&quot;</span><span class="p">,</span>
      <span class="s2">&quot;BnF. Departement des Manuscrits. Francais 2608.json&quot;</span>       
<span class="p">]</span>

<span class="c1"># Ihr Code</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./ch04-dateien-verarbeiten"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="02-dateien-i-o.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Dateien öffnen, lesen und bearbeiten</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="04-csv.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">CSV</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Melanie Althage, Martin Dröge, Torsten Hiltmann, Philipp Schneider<br/>
    
        &copy; Copyright 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>